function dropdown(){let o=window.matchMedia("(max-width: 767px)"),i=document.querySelector(".gh-head-menu"),r=i?.querySelector(".nav");if(r){let e=document.querySelector(".gh-head-logo"),t=r.innerHTML;o.matches&&r.querySelectorAll("li").forEach(function(e,t){e.style.transitionDelay=.03*(t+1)+"s"});let n=function(){if(!o.matches){for(var e=[];r.offsetWidth+64>i.offsetWidth&&r.lastElementChild;)e.unshift(r.lastElementChild),r.lastElementChild.remove();if(e.length){let t=document.createElement("button"),n=(t.setAttribute("class","nav-more-toggle gh-icon-btn"),t.setAttribute("aria-label","More"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor"><path d="M21.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0zM13.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0zM5.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0z"></path></svg>',document.createElement("div"));n.setAttribute("class","gh-dropdown"),10<=e.length?(document.body.classList.add("is-dropdown-mega"),n.style.gridTemplateRows=`repeat(${Math.ceil(e.length/2)}, 1fr)`):document.body.classList.remove("is-dropdown-mega"),e.forEach(function(e){n.appendChild(e)}),t.appendChild(n),r.appendChild(t),document.body.classList.add("is-dropdown-loaded"),window.addEventListener("click",function(e){document.body.classList.contains("is-dropdown-open")?document.body.classList.remove("is-dropdown-open"):t.contains(e.target)&&document.body.classList.add("is-dropdown-open")})}else document.body.classList.add("is-dropdown-loaded")}};imagesLoaded(e,function(){n()}),window.addEventListener("load",function(){e||n()}),window.addEventListener("resize",function(){setTimeout(()=>{r.innerHTML=t,n()},1)})}}function lightbox(e){document.querySelectorAll(e).forEach(function(e){e.addEventListener("click",function(e){var t=e;t.preventDefault();for(var n,o=[],i=0,r=t.target.closest(".kg-card").previousElementSibling;r&&(r.classList.contains("kg-image-card")||r.classList.contains("kg-gallery-card"));){var a=[];r.querySelectorAll("img").forEach(function(e){a.push({src:e.getAttribute("src"),msrc:e.getAttribute("src"),w:e.getAttribute("width"),h:e.getAttribute("height"),el:e}),i+=1}),r=r.previousElementSibling,o=a.concat(o)}t.target.classList.contains("kg-image")?o.push({src:t.target.getAttribute("src"),msrc:t.target.getAttribute("src"),w:t.target.getAttribute("width"),h:t.target.getAttribute("height"),el:t.target}):(n=!1,t.target.closest(".kg-gallery-card").querySelectorAll("img").forEach(function(e){o.push({src:e.getAttribute("src"),msrc:e.getAttribute("src"),w:e.getAttribute("width"),h:e.getAttribute("height"),el:e}),n||e===t.target?n=!0:i+=1}));for(var l=t.target.closest(".kg-card").nextElementSibling;l&&(l.classList.contains("kg-image-card")||l.classList.contains("kg-gallery-card"));)l.querySelectorAll("img").forEach(function(e){o.push({src:e.getAttribute("src"),msrc:e.getAttribute("src"),w:e.getAttribute("width"),h:e.getAttribute("height"),el:e})}),l=l.nextElementSibling;e=document.querySelectorAll(".pswp")[0];new PhotoSwipe(e,PhotoSwipeUI_Default,o,{bgOpacity:.9,closeOnScroll:!0,fullscreenEl:!1,history:!1,index:i,shareEl:!1,zoomEl:!1,getThumbBoundsFn:function(e){var e=o[e].el,t=window.pageYOffset||document.documentElement.scrollTop,e=e.getBoundingClientRect();return{x:e.left,y:e.top+t,w:e.width}}}).init()})})}function pagination(e,l,s=!1){let c=document.querySelector(".gh-feed");if(!c)return;let t=!1,n=c.nextElementSibling||c.parentElement.nextElementSibling||document.querySelector(".gh-foot"),u=document.querySelector(".gh-loadmore"),o=(!document.querySelector("link[rel=next]")&&u&&u.remove(),async function(){var o=document.querySelector("link[rel=next]");if(o)try{var e=await(await fetch(o.href)).text(),i=(new DOMParser).parseFromString(e,"text/html"),r=i.querySelectorAll(".gh-feed:not(.gh-featured):not(.gh-related) > *");let t=document.createDocumentFragment(),n=[];r.forEach(function(e){e=document.importNode(e,!0);s&&(e.style.visibility="hidden"),t.appendChild(e),n.push(e)}),c.appendChild(t),l&&l(n,d);var a=i.querySelector("link[rel=next]");a&&a.href?o.href=a.href:(o.remove(),u&&u.remove())}catch(e){throw o.remove(),u&&u.remove(),e}}),d=async function(){n.getBoundingClientRect().top<=window.innerHeight&&document.querySelector("link[rel=next]")&&await o()};let i=new IntersectionObserver(async function(e){if(!t){if(t=!0,e[0].isIntersecting)if(s)await o();else for(;n.getBoundingClientRect().top<=window.innerHeight&&document.querySelector("link[rel=next]");)await o();t=!1,document.querySelector("link[rel=next]")||i.disconnect()}});e?i.observe(n):u.addEventListener("click",o)}((e,t)=>{"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()})("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){var n;return e&&t&&((n=(n=this._events=this._events||{})[e]=n[e]||[]).includes(t)||n.push(t)),this},t.once=function(e,t){var n;return e&&t&&(this.on(e,t),((n=this._onceEvents=this._onceEvents||{})[e]=n[e]||{})[t]=!0),this},t.off=function(e,t){e=this._events&&this._events[e];return e&&e.length&&-1!=(t=e.indexOf(t))&&e.splice(t,1),this},t.emitEvent=function(e,t){let n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];var o,i=this._onceEvents&&this._onceEvents[e];for(o of n)i&&i[o]&&(this.off(e,o),delete i[o]),o.apply(this,t)}return this},t.allOff=function(){return delete this._events,delete this._onceEvents,this},e}),((e,t)=>{"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)})("undefined"!=typeof window?window:this,function(t,e){let r=t.jQuery,a=t.console;function l(e,t,n){if(!(this instanceof l))return new l(e,t,n);let o=e,i;(o="string"==typeof e?document.querySelectorAll(e):o)?(this.elements=(i=o,Array.isArray(i)?i:"object"==typeof i&&"number"==typeof i.length?[...i]:[i]),this.options={},"function"==typeof t?n=t:Object.assign(this.options,t),n&&this.on("always",n),this.getImages(),r&&(this.jqDeferred=new r.Deferred),setTimeout(this.check.bind(this))):a.error("Bad element for imagesLoaded "+(o||e))}(l.prototype=Object.create(e.prototype)).getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)};let i=[1,9,11],s=(l.prototype.addElementImages=function(e){"IMG"===e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t,n,o=e.nodeType;if(o&&i.includes(o)){for(t of e.querySelectorAll("img"))this.addImage(t);if("string"==typeof this.options.background)for(n of e.querySelectorAll(this.options.background))this.addElementBackgroundImages(n)}},/url\((['"])?(.*?)\1\)/gi);function n(e){this.img=e}function o(e,t){this.url=e,this.element=t,this.img=new Image}return l.prototype.addElementBackgroundImages=function(t){var n=getComputedStyle(t);if(n){let e=s.exec(n.backgroundImage);for(;null!==e;){var o=e&&e[2];o&&this.addBackground(o,t),e=s.exec(n.backgroundImage)}}},l.prototype.addImage=function(e){e=new n(e);this.images.push(e)},l.prototype.addBackground=function(e,t){e=new o(e,t);this.images.push(e)},l.prototype.check=function(){if(this.progressedCount=0,this.hasAnyBroken=!1,this.images.length){let t=(e,t,n)=>{setTimeout(()=>{this.progress(e,t,n)})};this.images.forEach(function(e){e.once("progress",t),e.check()})}else this.complete()},l.prototype.progress=function(e,t,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount===this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+n,e,t)},l.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(e=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[e](this))},(n.prototype=Object.create(e.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.img.crossOrigin&&(this.proxyImage.crossOrigin=this.img.crossOrigin),this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.currentSrc||this.img.src)},n.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},n.prototype.confirm=function(e,t){this.isLoaded=e;e=this.img.parentNode,e="PICTURE"===e.nodeName?e:this.img;this.emitEvent("progress",[this,e,t])},n.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},n.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},n.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},n.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(o.prototype=Object.create(n.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},o.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},o.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},(l.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((r=e).fn.imagesLoaded=function(e,t){return new l(this,e,t).jqDeferred.promise(r(this))})})(),l}),((e,t)=>{"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()})(this,function(){return function(o,l){function e(e){if(S)return!0;e=e||window.event,A.timeToIdle&&A.mouseUsed&&!v&&a();for(var t,n,o=(e.target||e.srcElement).getAttribute("class")||"",i=0;i<N.length;i++)(t=N[i]).onTap&&-1<o.indexOf("pswp__"+t.name)&&(t.onTap(),n=!0);n&&(e.stopPropagation&&e.stopPropagation(),S=!0,e=l.features.isOldAndroid?600:30,setTimeout(function(){S=!1},e))}function n(){var e=1===A.getNumItemsFn();e!==T&&(O(d,"ui--one-slide",e),T=e)}function t(){O(g,"share-modal--hidden",L)}function i(){for(var e,t,n,o,i="",r=0;r<A.shareButtons.length;r++)e=A.shareButtons[r],t=A.getImageURLForShare(e),n=A.getPageURLForShare(e),o=A.getTextForShare(e),i+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(o))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",A.parseShareButtonOut&&(i=A.parseShareButtonOut(e,i));g.children[0].innerHTML=i,g.children[0].onclick=U}function r(e){for(var t=0;t<A.closeElClasses.length;t++)if(l.hasClass(e,"pswp__"+A.closeElClasses[t]))return!0}function a(){clearTimeout(I),M=0,v&&_.setIdle(!1)}function s(e){(e=(e=e||window.event).relatedTarget||e.toElement)&&"HTML"!==e.nodeName||(clearTimeout(I),I=setTimeout(function(){_.setIdle(!0)},A.timeToIdleOutside))}function c(e){x!==e&&(O(b,"preloader--active",!e),x=e)}function P(e){var t,n=e.vGap;!o.likelyTouchDevice||A.mouseUsed||screen.width>A.fitControlsWidth?(t=A.barsSize,A.captionEl&&"auto"===t.bottom?(p||((p=l.createEl("pswp__caption pswp__caption--fake")).appendChild(l.createEl("pswp__caption__center")),d.insertBefore(p,m),l.addClass(d,"pswp__ui--fit")),A.addCaptionHTMLFn(e,p,!0)?(e=p.clientHeight,n.bottom=parseInt(e,10)||44):n.bottom=t.top):n.bottom="auto"===t.bottom?0:t.bottom,n.top=t.top):n.top=n.bottom=0}function F(){function e(e){if(e)for(var t=e.length,n=0;n<t;n++){i=e[n],r=i.className;for(var o=0;o<N.length;o++)a=N[o],-1<r.indexOf("pswp__"+a.name)&&(A[a.option]?(l.removeClass(i,"pswp__element--disabled"),a.onInit&&a.onInit(i)):l.addClass(i,"pswp__element--disabled"))}}e(d.children);var i,r,a,t=l.getChildByClass(d,"pswp__top-bar");t&&e(t.children)}var u,d,m,p,f,h,g,y,v,w,b,x,E,T,A,S,C,I,_=this,k=!1,D=!0,L=!0,z={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return o.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return o.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},O=function(e,t,n){l[(n?"add":"remove")+"Class"](e,"pswp__"+t)},R=function(){return(L=!L)?(l.removeClass(g,"pswp__share-modal--fade-in"),setTimeout(function(){L&&t()},300)):(t(),setTimeout(function(){L||l.addClass(g,"pswp__share-modal--fade-in")},30)),L||i(),!1},U=function(e){var t=(e=e||window.event).target||e.srcElement;return o.shout("shareLinkClick",e,t),!(!t.href||!t.hasAttribute("download")&&(window.open(t.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),L||R(),1))},M=0,N=[{name:"caption",option:"captionEl",onInit:function(e){m=e}},{name:"share-modal",option:"shareEl",onInit:function(e){g=e},onTap:function(){R()}},{name:"button--share",option:"shareEl",onInit:function(e){h=e},onTap:function(){R()}},{name:"button--zoom",option:"zoomEl",onTap:o.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){f=e}},{name:"button--close",option:"closeEl",onTap:o.close},{name:"button--arrow--left",option:"arrowEl",onTap:o.prev},{name:"button--arrow--right",option:"arrowEl",onTap:o.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){u.isFullscreen()?u.exit():u.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){b=e}}];_.init=function(){var t;l.extend(o.options,z,!0),A=o.options,d=l.getChildByClass(o.scrollWrap,"pswp__ui"),(w=o.listen)("onVerticalDrag",function(e){D&&e<.95?_.hideControls():!D&&.95<=e&&_.showControls()}),w("onPinchClose",function(e){D&&e<.9?(_.hideControls(),t=!0):t&&!D&&.9<e&&_.showControls()}),w("zoomGestureEnded",function(){(t=!1)&&!D&&_.showControls()}),w("beforeChange",_.update),w("doubleTap",function(e){var t=o.currItem.initialZoomLevel;o.getZoomLevel()!==t?o.zoomTo(t,e,333):o.zoomTo(A.getDoubleTapZoom(!1,o.currItem),e,333)}),w("preventDragEvent",function(e,t,n){var o=e.target||e.srcElement;o&&o.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<o.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(o.tagName))&&(n.prevent=!1)}),w("bindEvents",function(){l.bind(d,"pswpTap click",e),l.bind(o.scrollWrap,"pswpTap",_.onGlobalTap),o.likelyTouchDevice||l.bind(o.scrollWrap,"mouseover",_.onMouseOver)}),w("unbindEvents",function(){L||R(),C&&clearInterval(C),l.unbind(document,"mouseout",s),l.unbind(document,"mousemove",a),l.unbind(d,"pswpTap click",e),l.unbind(o.scrollWrap,"pswpTap",_.onGlobalTap),l.unbind(o.scrollWrap,"mouseover",_.onMouseOver),u&&(l.unbind(document,u.eventK,_.updateFullscreen),u.isFullscreen()&&(A.hideAnimationDuration=0,u.exit()),u=null)}),w("destroy",function(){A.captionEl&&(p&&d.removeChild(p),l.removeClass(m,"pswp__caption--empty")),g&&(g.children[0].onclick=null),l.removeClass(d,"pswp__ui--over-close"),l.addClass(d,"pswp__ui--hidden"),_.setIdle(!1)}),A.showAnimationDuration||l.removeClass(d,"pswp__ui--hidden"),w("initialZoomIn",function(){A.showAnimationDuration&&l.removeClass(d,"pswp__ui--hidden")}),w("initialZoomOut",function(){l.addClass(d,"pswp__ui--hidden")}),w("parseVerticalMargin",P),F(),A.shareEl&&h&&g&&(L=!0),n(),A.timeToIdle&&w("mouseUsed",function(){l.bind(document,"mousemove",a),l.bind(document,"mouseout",s),C=setInterval(function(){2===++M&&_.setIdle(!0)},A.timeToIdle/2)}),A.fullscreenEl&&!l.features.isOldAndroid&&((u=u||_.getFullscreenAPI())?(l.bind(document,u.eventK,_.updateFullscreen),_.updateFullscreen(),l.addClass(o.template,"pswp--supports-fs")):l.removeClass(o.template,"pswp--supports-fs")),A.preloaderEl&&(c(!0),w("beforeChange",function(){clearTimeout(E),E=setTimeout(function(){o.currItem&&o.currItem.loading?o.allowProgressiveImg()&&(!o.currItem.img||o.currItem.img.naturalWidth)||c(!1):c(!0)},A.loadingIndicatorDelay)}),w("imageLoadComplete",function(e,t){o.currItem===t&&c(!0)}))},_.setIdle=function(e){O(d,"ui--idle",v=e)},_.update=function(){k=!(!D||!o.currItem||(_.updateIndexIndicator(),A.captionEl&&(A.addCaptionHTMLFn(o.currItem,m),O(m,"caption--empty",!o.currItem.title)),0)),L||R(),n()},_.updateFullscreen=function(e){e&&setTimeout(function(){o.setScrollOffset(0,l.getScrollY())},50),l[(u.isFullscreen()?"add":"remove")+"Class"](o.template,"pswp--fs")},_.updateIndexIndicator=function(){A.counterEl&&(f.innerHTML=o.getCurrentIndex()+1+A.indexIndicatorSep+A.getNumItemsFn())},_.onGlobalTap=function(e){var t=(e=e||window.event).target||e.srcElement;if(!S)if(e.detail&&"mouse"===e.detail.pointerType)r(t)?o.close():l.hasClass(t,"pswp__img")&&(1===o.getZoomLevel()&&o.getZoomLevel()<=o.currItem.fitRatio?A.clickToCloseNonZoomable&&o.close():o.toggleDesktopZoom(e.detail.releasePoint));else if(A.tapToToggleControls&&(D?_.hideControls():_.showControls()),A.tapToClose&&(l.hasClass(t,"pswp__img")||r(t)))return void o.close()},_.onMouseOver=function(e){e=(e=e||window.event).target||e.srcElement;O(d,"ui--over-close",r(e))},_.hideControls=function(){l.addClass(d,"pswp__ui--hidden"),D=!1},_.showControls=function(){D=!0,k||_.update(),l.removeClass(d,"pswp__ui--hidden")},_.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},_.getFullscreenAPI=function(){var e,t=document.documentElement,n="fullscreenchange";return t.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}:t.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}:t.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}:t.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){return y=A.closeOnScroll,A.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?o.template[this.enterK]():void o.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return A.closeOnScroll=y,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}}),((e,t)=>{"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()})(this,function(){return function(m,F,t,z){var p={features:null,bind:function(e,t,n,o){var i=(o?"remove":"add")+"EventListener";t=t.split(" ");for(var r=0;r<t.length;r++)t[r]&&e[i](t[r],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){t=document.createElement(t||"div");return e&&(t.className=e),t},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){p.bind(e,t,n,!0)},removeClass:function(e,t){t=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(t," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){p.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(p.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var o=e.length;o--;)if(e[o][n]===t)return o;return-1},extend:function(e,t,n){for(var o in t)if(t.hasOwnProperty(o)){if(n&&e.hasOwnProperty(o))continue;e[o]=t[o]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(p.features)return p.features;var e,t,n=p.createEl().style,o="",i={};i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,i.pointerEvent||(e=navigator.userAgent,/iP(hone|od)/.test(navigator.platform)&&(t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/))&&0<t.length&&1<=(t=parseInt(t[1],10))&&t<8&&(i.isOldIOSPhone=!0),t=(t=e.match(/Android\s([0-9\.]*)/))?t[1]:0,1<=(t=parseFloat(t))&&(t<4.4&&(i.isOldAndroid=!0),i.androidVersion=t),i.isMobileOpera=/opera mini|opera mobi/i.test(e));for(var r,a,l,s=["transform","perspective","animationName"],c=["","webkit","Moz","ms","O"],u=0;u<4;u++){for(var o=c[u],d=0;d<3;d++)r=s[d],a=o+(o?r.charAt(0).toUpperCase()+r.slice(1):r),!i[r]&&a in n&&(i[r]=a);o&&!i.raf&&(o=o.toLowerCase(),i.raf=window[o+"RequestAnimationFrame"],i.raf)&&(i.caf=window[o+"CancelAnimationFrame"]||window[o+"CancelRequestAnimationFrame"])}return i.raf||(l=0,i.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-l)),o=window.setTimeout(function(){e(t+n)},n);return l=t+n,o},i.caf=function(e){clearTimeout(e)}),i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,p.features=i}},f=(p.detectFeatures(),p.features.oldIE&&(p.bind=function(e,t,n,o){t=t.split(" ");for(var i,r=(o?"detach":"attach")+"Event",a=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(i=t[l])if("object"==typeof n&&n.handleEvent){if(o){if(!n["oldIE"+i])return!1}else n["oldIE"+i]=a;e[r]("on"+i,n["oldIE"+i])}else e[r]("on"+i,n)}),this),U=25,h={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e||t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};p.extend(h,z);function e(){return{x:0,y:0}}function H(e,t){p.extend(f,t.publicMethods),je.push(e)}function B(e){var t=R();return t-1<e?e-t:e<0?t+e:e}function r(e,t){return Ke[e]||(Ke[e]=[]),Ke[e].push(t)}function q(e,t,n,o){o===f.currItem.initialZoomLevel?n[e]=f.currItem.initialPosition[e]:(n[e]=Qe(e,o),n[e]>t.min[e]?n[e]=t.min[e]:n[e]<t.max[e]&&(n[e]=t.max[e]))}function Z(e){var t="";h.escKey&&27===e.keyCode?t="close":h.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),!t||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,f[t]())}function W(e){e&&(ke||_e||v||Se)&&(e.preventDefault(),e.stopPropagation())}function j(){f.setScrollOffset(0,p.getScrollY())}function G(e){var t;"mousedown"===e.type&&0<e.button||(Qt?e.preventDefault():Ce&&"mousedown"===e.type||(Lt(e,!0)&&e.preventDefault(),T("pointerDown"),pe&&((t=p.arraySearch(ht,e.pointerId,"id"))<0&&(t=ht.length),ht[t]={x:e.pageX,y:e.pageY,id:e.pointerId}),e=(t=Ut(e)).length,c=null,ct(),s&&1!==e||(s=Ne=!0,p.bind(window,ee,f),Ae=ze=Pe=Se=Le=ke=Ie=_e=!1,Me=null,T("firstTouchStart",t),I(Be,w),He.x=He.y=0,I(L,t[0]),I(ft,L),gt.x=x.x*qe,yt=[{x:L.x,y:L.y}],Ee=xe=A(),ot(y,!0),Ct(),It()),!u&&1<e&&!v&&!Le&&(ne=y,u=Ie=!(_e=!1),He.y=He.x=0,I(Be,w),I(k,t[0]),I(pt,t[1]),Rt(k,pt,Tt),Et.x=Math.abs(Tt.x)-w.x,Et.y=Math.abs(Tt.y)-w.y,Oe=St(k,pt))))}function Y(e){var t;e.preventDefault(),pe&&-1<(t=p.arraySearch(ht,e.pointerId,"id"))&&((t=ht[t]).x=e.pageX,t.y=e.pageY),s&&(t=Ut(e),Me||ke||u?c=t:O.x!==x.x*qe?Me="h":(e=Math.abs(t[0].x-L.x)-Math.abs(t[0].y-L.y),Math.abs(e)>=mt&&(Me=0<e?"h":"v",c=t)))}function K(e){if(l.isOldAndroid){if(Ce&&"mouseup"===e.type)return;-1<e.type.indexOf("touch")&&(clearTimeout(Ce),Ce=setTimeout(function(){Ce=0},600))}var t;T("pointerUp"),Lt(e,!1)&&e.preventDefault(),pe&&-1<(r=p.arraySearch(ht,e.pointerId,"id"))&&(t=ht.splice(r,1)[0],navigator.msPointerEnabled&&(t.type={4:"mouse",2:"touch",3:"pen"}[e.pointerType],t.type)||(t.type=e.pointerType||"mouse"));var n=(r=Ut(e)).length;if(2===(n="mouseup"===e.type?0:n))return!(c=null);1===n&&I(ft,r[0]),0!==n||Me||v||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),T("touchRelease",e,t));var o,i,r=-1;if(0===n&&(s=!1,p.unbind(window,ee,f),Ct(),u?r=0:-1!==xt&&(r=A()-xt)),xt=1===n?A():-1,e=-1!==r&&r<150?"zoom":"swipe",u&&n<2&&(u=!1,1===n&&(e="zoomPointerUp"),T("zoomGestureEnded")),c=null,ke||_e||v||Se)if(ct(),(Te=Te||qt()).calculateSwipeSpeed("x"),Se)Nt()<h.verticalDragRange?f.close():(o=w.y,i=Fe,ut("verticalDrag",0,1,300,p.easing.cubic.out,function(e){w.y=(f.currItem.initialPosition.y-o)*e+o,S((1-i)*e+i),C()}),T("onVerticalDrag",1));else{if((Le||v)&&0===n){if(Wt(e,Te))return;e="zoomPointerUp"}if(!v)return"swipe"!==e?void Gt():void(!Le&&y>f.currItem.fitRatio&&Zt(Te))}}var X,$,V,g,J,Q,ee,te,o,y,ne,oe,ie,re,ae,a,le,se,ce,ue,de,me,pe,i,fe,he,ge,ye,ve,we,l,be,xe,Ee,Te,Ae,Se,Ce,s,Ie,_e,ke,De,Le,c,u,Oe,d,Re,v,Me,Ne,Pe,Fe,ze,Ue,He=e(),Be=e(),w=e(),b={},qe=0,Ze={},x=e(),E=0,We=!0,je=[],Ge={},Ye=!1,Ke={},T=function(e){var t=Ke[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var o=0;o<t.length;o++)t[o].apply(f,n)}},A=function(){return(new Date).getTime()},S=function(e){Fe=e,f.bg.style.opacity=e*h.bgOpacity},Xe=function(e,t,n,o,i){(!Ye||i&&i!==f.currItem)&&(o/=(i||f.currItem).fitRatio),e[me]=oe+t+"px, "+n+"px"+ie+" scale("+o+")"},C=function(e){Re&&(e&&(y>f.currItem.fitRatio?Ye||(cn(f.currItem,!1,!0),Ye=!0):Ye&&(cn(f.currItem),Ye=!1)),Xe(Re,w.x,w.y,y))},$e=function(e){e.container&&Xe(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Ve=function(e,t){t[me]=oe+e+"px, 0px"+ie},Je=function(e,t){var n;!h.loop&&t&&(t=g+(x.x*qe-e)/x.x,n=Math.round(e-O.x),t<0&&0<n||t>=R()-1&&n<0)&&(e=O.x+n*h.mainScrollEndFriction),O.x=e,Ve(e,J)},Qe=function(e,t){var n=Et[e]-Ze[e];return Be[e]+He[e]+n-t/ne*n},I=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},et=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},tt=null,nt=function(){tt&&(p.unbind(document,"mousemove",nt),p.addClass(m,"pswp--has_mouse"),h.mouseUsed=!0,T("mouseUsed")),tt=setTimeout(function(){tt=null},100)},ot=function(e,t){e=ln(f.currItem,b,e);return t&&(d=e),e},it=function(e){return(e=e||f.currItem).initialZoomLevel},rt=function(e){return 0<(e=e||f.currItem).w?h.maxSpreadZoom:1},_={},at=0,lt=function(e){_[e]&&(_[e].raf&&he(_[e].raf),at--,delete _[e])},st=function(e){_[e]&&lt(e),_[e]||(at++,_[e]={})},ct=function(){for(var e in _)_.hasOwnProperty(e)&&lt(e)},ut=function(e,t,n,o,i,r,a){function l(){_[e]&&(s=A()-c,o<=s?(lt(e),r(n),a&&a()):(r((n-t)*i(s/o)+t),_[e].raf=fe(l)))}var s,c=A();st(e);l()},z={shout:T,listen:r,viewportSize:b,options:h,isMainScrollAnimating:function(){return v},getZoomLevel:function(){return y},getCurrentIndex:function(){return g},isDragging:function(){return s},isZooming:function(){return u},setScrollOffset:function(e,t){Ze.x=e,we=Ze.y=t,T("updateScrollOffset",Ze)},applyZoomPan:function(e,t,n,o){w.x=t,w.y=n,y=e,C(o)},init:function(){if(!X&&!$){f.framework=p,f.template=m,f.bg=p.getChildByClass(m,"pswp__bg"),ge=m.className,X=!0,l=p.detectFeatures(),fe=l.raf,he=l.caf,me=l.transform,ve=l.oldIE,f.scrollWrap=p.getChildByClass(m,"pswp__scroll-wrap"),f.container=p.getChildByClass(f.scrollWrap,"pswp__container"),J=f.container.style,f.itemHolders=a=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],a[0].el.style.display=a[2].el.style.display="none",me?(t=l.perspective&&!i,oe="translate"+(t?"3d(":"("),ie=l.perspective?", 0px)":")"):(me="left",p.addClass(m,"pswp--ie"),Ve=function(e,t){t.left=e+"px"},$e=function(e){var t=1<e.fitRatio?1:e.fitRatio,n=e.container.style,o=t*e.h;n.width=t*e.w+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},C=function(){var e,t,n,o;Re&&(e=Re,o=(n=1<(t=f.currItem).fitRatio?1:t.fitRatio)*t.h,e.width=n*t.w+"px",e.height=o+"px",e.left=w.x+"px",e.top=w.y+"px")}),o={resize:f.updateSize,orientationchange:function(){clearTimeout(be),be=setTimeout(function(){b.x!==f.scrollWrap.clientWidth&&f.updateSize()},500)},scroll:j,keydown:Z,click:W};var e,t=l.isOldIOSPhone||l.isOldAndroid||l.isMobileOpera;for(l.animationName&&l.transform&&!t||(h.showAnimationDuration=h.hideAnimationDuration=0),e=0;e<je.length;e++)f["init"+je[e]]();F&&(f.ui=new F(f,p)).init(),T("firstUpdate"),g=g||h.index||0,(isNaN(g)||g<0||g>=R())&&(g=0),f.currItem=en(g),(l.isOldIOSPhone||l.isOldAndroid)&&(We=!1),m.setAttribute("aria-hidden","false"),h.modal&&(We?m.style.position="fixed":(m.style.position="absolute",m.style.top=p.getScrollY()+"px")),void 0===we&&(T("initialLayout"),we=ye=p.getScrollY());var n="pswp--open ";for(h.mainClass&&(n+=h.mainClass+" "),h.showHideOpacity&&(n+="pswp--animate_opacity "),n=(n=(n+=i?"pswp--touch":"pswp--notouch")+(l.animationName?" pswp--css_animation":""))+(l.svg?" pswp--svg":""),p.addClass(m,n),f.updateSize(),Q=-1,E=null,e=0;e<3;e++)Ve((e+Q)*x.x,a[e].el.style);ve||p.bind(f.scrollWrap,te,f),r("initialZoomInEnd",function(){f.setContent(a[0],g-1),f.setContent(a[2],g+1),a[0].el.style.display=a[2].el.style.display="block",h.focus&&m.focus(),p.bind(document,"keydown",f),l.transform&&p.bind(f.scrollWrap,"click",f),h.mouseUsed||p.bind(document,"mousemove",nt),p.bind(window,"resize scroll orientationchange",f),T("bindEvents")}),f.setContent(a[1],g),f.updateCurrItem(),T("afterInit"),We||(re=setInterval(function(){at||s||u||y!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),p.addClass(m,"pswp--visible")}var t},close:function(){X&&($=!(X=!1),T("close"),p.unbind(window,"resize scroll orientationchange",f),p.unbind(window,"scroll",o.scroll),p.unbind(document,"keydown",f),p.unbind(document,"mousemove",nt),l.transform&&p.unbind(f.scrollWrap,"click",f),s&&p.unbind(window,ee,f),clearTimeout(be),T("unbindEvents"),tn(f.currItem,null,!0,f.destroy))},destroy:function(){T("destroy"),$t&&clearTimeout($t),m.setAttribute("aria-hidden","true"),m.className=ge,re&&clearInterval(re),p.unbind(f.scrollWrap,te,f),p.unbind(window,"scroll",f),Ct(),ct(),Ke=null},panTo:function(e,t,n){n||(e>d.min.x?e=d.min.x:e<d.max.x&&(e=d.max.x),t>d.min.y?t=d.min.y:t<d.max.y&&(t=d.max.y)),w.x=e,w.y=t,C()},handleEvent:function(e){e=e||window.event,o[e.type]&&o[e.type](e)},goTo:function(e){var t=(e=B(e))-g;E=t,g=e,f.currItem=en(g),qe-=t,Je(x.x*qe),ct(),v=!1,f.updateCurrItem()},next:function(){f.goTo(g+1)},prev:function(){f.goTo(g-1)},updateCurrZoomItem:function(e){var t;e&&T("beforeChange",0),Re=a[1].el.children.length&&(t=a[1].el.children[0],p.hasClass(t,"pswp__zoom-wrap"))?t.style:null,d=f.currItem.bounds,ne=y=f.currItem.initialZoomLevel,w.x=d.center.x,w.y=d.center.y,e&&T("afterChange")},invalidateCurrItems:function(){ae=!0;for(var e=0;e<3;e++)a[e].item&&(a[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==E){var t,n=Math.abs(E);if(!(e&&n<2)){f.currItem=en(g),Ye=!1,T("beforeChange",E),3<=n&&(Q+=E+(0<E?-3:3),n=3);for(var o=0;o<n;o++)0<E?(t=a.shift(),a[2]=t,Ve((++Q+2)*x.x,t.el.style),f.setContent(t,g-n+o+1+1)):(t=a.pop(),a.unshift(t),Ve(--Q*x.x,t.el.style),f.setContent(t,g+n-o-1-1));Re&&1===Math.abs(E)&&(e=en(le)).initialZoomLevel!==y&&(ln(e,b),cn(e),$e(e)),E=0,f.updateCurrZoomItem(),le=g,T("afterChange")}}},updateSize:function(e){if(!We&&h.modal){var t=p.getScrollY();if(we!==t&&(m.style.top=t+"px",we=t),!e&&Ge.x===window.innerWidth&&Ge.y===window.innerHeight)return;Ge.x=window.innerWidth,Ge.y=window.innerHeight,m.style.height=Ge.y+"px"}if(b.x=f.scrollWrap.clientWidth,b.y=f.scrollWrap.clientHeight,j(),x.x=b.x+Math.round(b.x*h.spacing),x.y=b.y,Je(x.x*qe),T("beforeResize"),void 0!==Q){for(var n,o,i,r=0;r<3;r++)n=a[r],Ve((r+Q)*x.x,n.el.style),i=g+r-1,h.loop&&2<R()&&(i=B(i)),(o=en(i))&&(ae||o.needsUpdate||!o.bounds)?(f.cleanSlide(o),f.setContent(n,i),1===r&&(f.currItem=o,f.updateCurrZoomItem(!0)),o.needsUpdate=!1):-1===n.index&&0<=i&&f.setContent(n,i),o&&o.container&&(ln(o,b),cn(o),$e(o));ae=!1}ne=y=f.currItem.initialZoomLevel,(d=f.currItem.bounds)&&(w.x=d.center.x,w.y=d.center.y,C(!0)),T("resize")},zoomTo:function(t,e,n,o,i){e&&(ne=y,Et.x=Math.abs(e.x)-w.x,Et.y=Math.abs(e.y)-w.y,I(Be,w));function r(e){1===e?(y=t,w.x=a.x,w.y=a.y):(y=(t-l)*e+l,w.x=(a.x-s.x)*e+s.x,w.y=(a.y-s.y)*e+s.y),i&&i(e),C(1===e)}var e=ot(t,!1),a={},l=(q("x",e,a,t),q("y",e,a,t),y),s={x:w.x,y:w.y};et(a);n?ut("customZoomTo",0,1,n,o||p.easing.sine.inOut,r):r(1)}},dt=30,mt=10,k={},pt={},D={},L={},ft={},ht=[],gt={},yt=[],vt={},wt=0,bt=e(),xt=0,O=e(),Et=e(),Tt=e(),At=function(e,t){return e.x===t.x&&e.y===t.y},St=function(e,t){return vt.x=Math.abs(e.x-t.x),vt.y=Math.abs(e.y-t.y),Math.sqrt(vt.x*vt.x+vt.y*vt.y)},Ct=function(){De&&(he(De),De=null)},It=function(){s&&(De=fe(It),Bt())},_t=function(){return!("fit"===h.scaleMode&&y===f.currItem.initialZoomLevel)},kt=function(e,t){return!(!e||e===document)&&!(e.getAttribute("class")&&-1<e.getAttribute("class").indexOf("pswp__scroll-wrap"))&&(t(e)?e:kt(e.parentNode,t))},Dt={},Lt=function(e,t){return Dt.prevent=!kt(e.target,h.isClickableElement),T("preventDragEvent",e,t,Dt),Dt.prevent},Ot=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Rt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Mt=function(e,t,n){var o;50<e-Ee&&((o=2<yt.length?yt.shift():{}).x=t,o.y=n,yt.push(o),Ee=e)},Nt=function(){var e=w.y-f.currItem.initialPosition.y;return 1-Math.abs(e/(b.y/2))},Pt={},Ft={},zt=[],Ut=function(e){for(;0<zt.length;)zt.pop();return pe?(Ue=0,ht.forEach(function(e){0===Ue?zt[0]=e:1===Ue&&(zt[1]=e),Ue++})):-1<e.type.indexOf("touch")?e.touches&&0<e.touches.length&&(zt[0]=Ot(e.touches[0],Pt),1<e.touches.length)&&(zt[1]=Ot(e.touches[1],Ft)):(Pt.x=e.pageX,Pt.y=e.pageY,Pt.id="",zt[0]=Pt),zt},Ht=function(e,t){var n,o,i,r=w[e]+t[e],a=O.x+t.x,l=O.x-gt.x,s=r>d.min[e]||r<d.max[e]?h.panEndFriction:1,r=w[e]+t[e]*s;return!h.allowPanToNext&&y!==f.currItem.initialZoomLevel||(Re?"h"!==Me||"x"!==e||_e||(0<t[e]?(r>d.min[e]&&(s=h.panEndFriction,d.min[e],n=d.min[e]-Be[e]),(n<=0||l<0)&&1<R()?(i=a,l<0&&a>gt.x&&(i=gt.x)):d.min.x!==d.max.x&&(o=r)):(r<d.max[e]&&(s=h.panEndFriction,d.max[e],n=Be[e]-d.max[e]),(n<=0||0<l)&&1<R()?(i=a,0<l&&a<gt.x&&(i=gt.x)):d.min.x!==d.max.x&&(o=r))):i=a,"x"!==e)?void(v||Le||y>f.currItem.fitRatio&&(w[e]+=t[e]*s)):(void 0!==i&&(Je(i,!0),Le=i!==gt.x),d.min.x!==d.max.x&&(void 0!==o?w.x=o:Le||(w.x+=t.x*s)),void 0!==i)},Bt=function(){var e,t,n,o,i,r;c&&0!==(e=c.length)&&(I(k,c[0]),D.x=k.x-L.x,D.y=k.y-L.y,u&&1<e?(L.x=k.x,L.y=k.y,!D.x&&!D.y&&At(c[1],pt)||(I(pt,c[1]),_e||(_e=!0,T("zoomGestureStarted")),e=St(k,pt),(t=jt(e))>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(ze=!0),n=1,o=it(),i=rt(),t<o?h.pinchToClose&&!ze&&ne<=f.currItem.initialZoomLevel?(S(r=1-(o-t)/(o/1.2)),T("onPinchClose",r),Pe=!0):t=o-(n=1<(n=(o-t)/o)?1:n)*(o/3):i<t&&(t=i+(n=1<(n=(t-i)/(6*o))?1:n)*o),n<0&&(n=0),Rt(k,pt,bt),He.x+=bt.x-Tt.x,He.y+=bt.y-Tt.y,I(Tt,bt),w.x=Qe("x",t),w.y=Qe("y",t),Ae=y<t,y=t,C())):Me&&(Ne&&(Ne=!1,Math.abs(D.x)>=mt&&(D.x-=c[0].x-ft.x),Math.abs(D.y)>=mt)&&(D.y-=c[0].y-ft.y),L.x=k.x,L.y=k.y,0===D.x&&0===D.y||("v"===Me&&h.closeOnVerticalDrag&&!_t()?(He.y+=D.y,w.y+=D.y,r=Nt(),Se=!0,T("onVerticalDrag",r),S(r),C()):(Mt(A(),k.x,k.y),ke=!0,d=f.currItem.bounds,Ht("x",D)||(Ht("y",D),et(w),C())))))},qt=function(){var t,n,o={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(e){n=(1<yt.length?(t=A()-Ee+50,yt[yt.length-2]):(t=A()-xe,ft))[e],o.lastFlickOffset[e]=L[e]-n,o.lastFlickDist[e]=Math.abs(o.lastFlickOffset[e]),20<o.lastFlickDist[e]?o.lastFlickSpeed[e]=o.lastFlickOffset[e]/t:o.lastFlickSpeed[e]=0,Math.abs(o.lastFlickSpeed[e])<.1&&(o.lastFlickSpeed[e]=0),o.slowDownRatio[e]=.95,o.slowDownRatioReverse[e]=1-o.slowDownRatio[e],o.speedDecelerationRatio[e]=1},calculateOverBoundsAnimOffset:function(t,e){o.backAnimStarted[t]||(w[t]>d.min[t]?o.backAnimDestination[t]=d.min[t]:w[t]<d.max[t]&&(o.backAnimDestination[t]=d.max[t]),void 0!==o.backAnimDestination[t]&&(o.slowDownRatio[t]=.7,o.slowDownRatioReverse[t]=1-o.slowDownRatio[t],o.speedDecelerationRatioAbs[t]<.05)&&(o.lastFlickSpeed[t]=0,o.backAnimStarted[t]=!0,ut("bounceZoomPan"+t,w[t],o.backAnimDestination[t],e||300,p.easing.sine.out,function(e){w[t]=e,C()})))},calculateAnimOffset:function(e){o.backAnimStarted[e]||(o.speedDecelerationRatio[e]=o.speedDecelerationRatio[e]*(o.slowDownRatio[e]+o.slowDownRatioReverse[e]-o.slowDownRatioReverse[e]*o.timeDiff/10),o.speedDecelerationRatioAbs[e]=Math.abs(o.lastFlickSpeed[e]*o.speedDecelerationRatio[e]),o.distanceOffset[e]=o.lastFlickSpeed[e]*o.speedDecelerationRatio[e]*o.timeDiff,w[e]+=o.distanceOffset[e])},panAnimLoop:function(){_.zoomPan&&(_.zoomPan.raf=fe(o.panAnimLoop),o.now=A(),o.timeDiff=o.now-o.lastNow,o.lastNow=o.now,o.calculateAnimOffset("x"),o.calculateAnimOffset("y"),C(),o.calculateOverBoundsAnimOffset("x"),o.calculateOverBoundsAnimOffset("y"),o.speedDecelerationRatioAbs.x<.05)&&o.speedDecelerationRatioAbs.y<.05&&(w.x=Math.round(w.x),w.y=Math.round(w.y),C(),lt("zoomPan"))}};return o},Zt=function(e){return e.calculateSwipeSpeed("y"),d=f.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(st("zoomPan"),e.lastNow=A(),void e.panAnimLoop())},Wt=function(e,t){var n,o,i;v||(wt=g),"swipe"===e&&(e=L.x-ft.x,r=t.lastFlickDist.x<10,dt<e&&(r||20<t.lastFlickOffset.x)?o=-1:e<-dt&&(r||t.lastFlickOffset.x<-20)&&(o=1)),o&&((g+=o)<0?(g=h.loop?R()-1:0,i=!0):g>=R()&&(g=h.loop?0:R()-1,i=!0),i&&!h.loop||(E+=o,qe-=o,n=!0));var e=x.x*qe,r=Math.abs(e-O.x),a=n||e>O.x==0<t.lastFlickSpeed.x?(a=0<Math.abs(t.lastFlickSpeed.x)?r/Math.abs(t.lastFlickSpeed.x):333,a=Math.min(a,400),Math.max(a,250)):333;return wt===g&&(n=!1),v=!0,T("mainScrollAnimStart"),ut("mainScroll",O.x,e,a,p.easing.cubic.out,Je,function(){ct(),v=!1,wt=-1,!n&&wt===g||f.updateCurrItem(),T("mainScrollAnimComplete")}),n&&f.updateCurrItem(!0),n},jt=function(e){return 1/Oe*e*ne},Gt=function(){var e=y,t=it(),n=rt();y<t?e=t:n<y&&(e=n);var o,i=Fe;return Pe&&!Ae&&!ze&&y<t?f.close():(Pe&&(o=function(e){S((1-i)*e+i)}),f.zoomTo(e,0,200,p.easing.cubic.out,o)),!0};H("Gestures",{publicMethods:{initGestures:function(){function e(e,t,n,o,i){se=e+t,ce=e+n,ue=e+o,de=i?e+i:""}(pe=l.pointerEvent)&&l.touch&&(l.touch=!1),pe?navigator.msPointerEnabled?e("MSPointer","Down","Move","Up","Cancel"):e("pointer","down","move","up","cancel"):l.touch?(e("touch","start","move","end","cancel"),i=!0):e("mouse","down","move","up"),ee=ce+" "+ue+" "+de,te=se,pe&&!i&&(i=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),f.likelyTouchDevice=i,o[se]=G,o[ce]=Y,o[ue]=K,de&&(o[de]=o[ue]),l.touch&&(te+=" mousedown",ee+=" mousemove mouseup",o.mousedown=o[se],o.mousemove=o[ce],o.mouseup=o[ue]),i||(h.allowPanToNext=!1)}}});function Yt(e){function t(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,n.onload=n.onerror=null,n=null}e.loading=!0,e.loaded=!1;var n=e.img=p.createEl("pswp__img","img");n.onload=t,n.onerror=function(){e.loadError=!0,t()},n.src=e.src}function Kt(e,t){return e.src&&e.loadError&&e.container&&(t&&(e.container.innerHTML=""),e.container.innerHTML=h.errorMsg.replace("%url%",e.src),1)}function Xt(){if(nn.length){for(var e,t=0;t<nn.length;t++)(e=nn[t]).holder.index===e.index&&sn(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);nn=[]}}var $t,Vt,Jt,Qt,en,R,tn=function(r,e,a,t){function l(){lt("initialZoom"),a?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(S(1),e&&(e.style.display="block"),p.addClass(m,"pswp--animated-in"),T("initialZoom"+(a?"OutEnd":"InEnd"))),t&&t(),Qt=!1}$t&&clearTimeout($t),Jt=Qt=!0,r.initialLayout?(s=r.initialLayout,r.initialLayout=null):s=h.getThumbBoundsFn&&h.getThumbBoundsFn(g);var s,c,u,d=a?h.hideAnimationDuration:h.showAnimationDuration;d&&s&&void 0!==s.x?(c=V,u=!f.currItem.src||f.currItem.loadError||h.showHideOpacity,r.miniImg&&(r.miniImg.style.webkitBackfaceVisibility="hidden"),a||(y=s.w/r.w,w.x=s.x,w.y=s.y-ye,f[u?"template":"bg"].style.opacity=.001,C()),st("initialZoom"),a&&!c&&p.removeClass(m,"pswp--animated-in"),u&&(a?p[(c?"remove":"add")+"Class"](m,"pswp--animate_opacity"):setTimeout(function(){p.addClass(m,"pswp--animate_opacity")},30)),$t=setTimeout(function(){var t,n,o,i,e;T("initialZoom"+(a?"Out":"In")),a?(t=s.w/r.w,n={x:w.x,y:w.y},o=y,i=Fe,e=function(e){1===e?(y=t,w.x=s.x,w.y=s.y-we):(y=(t-o)*e+o,w.x=(s.x-n.x)*e+n.x,w.y=(s.y-we-n.y)*e+n.y),C(),u?m.style.opacity=1-e:S(i-e*i)},c?ut("initialZoom",0,1,d,p.easing.cubic.out,e,l):(e(1),$t=setTimeout(l,d+20))):(y=r.initialZoomLevel,I(w,r.initialPosition),C(),S(1),u?m.style.opacity=1:S(1),$t=setTimeout(l,d+20))},a?25:90)):(T("initialZoom"+(a?"Out":"In")),y=r.initialZoomLevel,I(w,r.initialPosition),C(),m.style.opacity=a?0:1,S(1),d?setTimeout(function(){l()},d):l())},M={},nn=[],on={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Vt.length}},rn=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},an=function(e,t,n){var o=e.bounds;o.center.x=Math.round((M.x-t)/2),o.center.y=Math.round((M.y-n)/2)+e.vGap.top,o.max.x=t>M.x?Math.round(M.x-t):o.center.x,o.max.y=n>M.y?Math.round(M.y-n)+e.vGap.top:o.center.y,o.min.x=t>M.x?0:o.center.x,o.min.y=n>M.y?e.vGap.top:o.center.y},ln=function(e,t,n){var o,i;return e.src&&!e.loadError?((o=!n)&&(e.vGap||(e.vGap={top:0,bottom:0}),T("parseVerticalMargin",e)),M.x=t.x,M.y=t.y-e.vGap.top-e.vGap.bottom,o&&(t=M.x/e.w,i=M.y/e.h,e.fitRatio=t<i?t:i,"orig"===(t=h.scaleMode)?n=1:"fit"===t&&(n=e.fitRatio),e.initialZoomLevel=n=1<n?1:n,e.bounds||(e.bounds=rn())),n?(an(e,e.w*n,e.h*n),o&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0):(e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=rn(),e.initialPosition=e.bounds.center,e.bounds)},sn=function(e,t,n,o,i,r){t.loadError||o&&(t.imageAppended=!0,cn(t,o,t===f.currItem&&Ye),n.appendChild(o),r)&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500)},cn=function(e,t,n){var o;e.src&&(t=t||e.container.lastChild,o=n?e.w:Math.round(e.w*e.fitRatio),n=n?e.h:Math.round(e.h*e.fitRatio),e.placeholder&&!e.loaded&&(e.placeholder.style.width=o+"px",e.placeholder.style.height=n+"px"),t.style.width=o+"px",t.style.height=n+"px")};H("Controller",{publicMethods:{lazyLoadItem:function(e){e=B(e);var t=en(e);t&&(!t.loaded&&!t.loading||ae)&&(T("gettingData",e,t),t.src)&&Yt(t)},initController:function(){p.extend(h,on,!0),f.items=Vt=t,en=f.getItemAt,R=h.getNumItemsFn,h.loop,R()<3&&(h.loop=!1),r("beforeChange",function(e){for(var t=h.preload,n=null===e||0<=e,o=Math.min(t[0],R()),i=Math.min(t[1],R()),r=1;r<=(n?i:o);r++)f.lazyLoadItem(g+r);for(r=1;r<=(n?o:i);r++)f.lazyLoadItem(g-r)}),r("initialLayout",function(){f.currItem.initialLayout=h.getThumbBoundsFn&&h.getThumbBoundsFn(g)}),r("mainScrollAnimComplete",Xt),r("initialZoomInEnd",Xt),r("destroy",function(){for(var e,t=0;t<Vt.length;t++)(e=Vt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);nn=null})},getItemAt:function(e){return 0<=e&&void 0!==Vt[e]&&Vt[e]},allowProgressiveImg:function(){return h.forceProgressiveLoading||!i||h.mouseUsed||1200<screen.width},setContent:function(t,n){h.loop&&(n=B(n));var e=f.getItemAt(t.index);e&&(e.container=null);var o,i,r,e=f.getItemAt(n);e?(T("gettingData",n,e),t.index=n,i=(t.item=e).container=p.createEl("pswp__zoom-wrap"),!e.src&&e.html&&(e.html.tagName?i.appendChild(e.html):i.innerHTML=e.html),Kt(e),ln(e,b),!e.src||e.loadError||e.loaded?e.src&&!e.loadError&&((o=p.createEl("pswp__img","img")).style.opacity=1,o.src=e.src,cn(e,o),sn(n,e,i,o,!0)):(e.loadComplete=function(e){if(X){if(t&&t.index===n){if(Kt(e,!0))return e.loadComplete=e.img=null,ln(e,b),$e(e),void(t.index===g&&f.updateCurrZoomItem());e.imageAppended?!Qt&&e.placeholder&&(e.placeholder.style.display="none",e.placeholder=null):l.transform&&(v||Qt)?nn.push({item:e,baseDiv:i,img:e.img,index:n,holder:t,clearPlaceholder:!0}):sn(n,e,i,e.img,v||Qt,!0)}e.loadComplete=null,e.img=null,T("imageLoadComplete",n,e)}},p.features.transform&&(r="pswp__img pswp__img--placeholder",r+=e.msrc?"":" pswp__img--placeholder--blank",r=p.createEl(r,e.msrc?"img":""),e.msrc&&(r.src=e.msrc),cn(e,r),i.appendChild(r),e.placeholder=r),e.loading||Yt(e),f.allowProgressiveImg()&&(!Jt&&l.transform?nn.push({item:e,baseDiv:i,img:e.img,index:n,holder:t}):sn(n,e,i,e.img,!0,!0))),Jt||n!==g?$e(e):(Re=i.style,tn(e,o||e.img)),t.el.innerHTML="",t.el.appendChild(i)):t.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});function un(e,t,n){var o=document.createEvent("CustomEvent"),t={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};o.initCustomEvent("pswpTap",!0,!0,t),e.target.dispatchEvent(o)}var dn,N,mn={};H("Tap",{publicMethods:{initTap:function(){r("firstTouchStart",f.onTapStart),r("touchRelease",f.onTapRelease),r("destroy",function(){mn={},dn=null})},onTapStart:function(e){1<e.length&&(clearTimeout(dn),dn=null)},onTapRelease:function(e,t){var n,o,i;!t||ke||Ie||at||(n=t,dn&&(clearTimeout(dn),dn=null,o=n,i=mn,Math.abs(o.x-i.x)<U)&&Math.abs(o.y-i.y)<U?T("doubleTap",n):"mouse"===t.type?un(e,t,"mouse"):"BUTTON"===e.target.tagName.toUpperCase()||p.hasClass(e.target,"pswp__single-tap")?un(e,t):(I(mn,n),dn=setTimeout(function(){un(e,t),dn=null},300)))}}}),H("DesktopZoom",{publicMethods:{initDesktopZoom:function(){ve||(i?r("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(e){N={};var t="wheel mousewheel DOMMouseScroll";r("bindEvents",function(){p.bind(m,t,f.handleMouseWheel)}),r("unbindEvents",function(){N&&p.unbind(m,t,f.handleMouseWheel)}),f.mouseZoomedIn=!1;function n(){f.mouseZoomedIn&&(p.removeClass(m,"pswp--zoomed-in"),f.mouseZoomedIn=!1),y<1?p.addClass(m,"pswp--zoom-allowed"):p.removeClass(m,"pswp--zoom-allowed"),i()}var o,i=function(){o&&(p.removeClass(m,"pswp--dragging"),o=!1)};r("resize",n),r("afterChange",n),r("pointerDown",function(){f.mouseZoomedIn&&(o=!0,p.addClass(m,"pswp--dragging"))}),r("pointerUp",i),e||n()},handleMouseWheel:function(e){if(y<=f.currItem.fitRatio)return h.modal&&(!h.closeOnScroll||at||s?e.preventDefault():me&&2<Math.abs(e.deltaY)&&(V=!0,f.close())),!0;if(e.stopPropagation(),N.x=0,"deltaX"in e)1===e.deltaMode?(N.x=18*e.deltaX,N.y=18*e.deltaY):(N.x=e.deltaX,N.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(N.x=-.16*e.wheelDeltaX),N.y=e.wheelDeltaY?-.16*e.wheelDeltaY:-.16*e.wheelDelta;else{if(!("detail"in e))return;N.y=e.detail}ot(y,!0);var t=w.x-N.x,n=w.y-N.y;(h.modal||t<=d.min.x&&t>=d.max.x&&n<=d.min.y&&n>=d.max.y)&&e.preventDefault(),f.panTo(t,n)},toggleDesktopZoom:function(e){e=e||{x:b.x/2+Ze.x,y:b.y/2+Ze.y};var t=h.getDoubleTapZoom(!0,f.currItem),n=y===t;f.mouseZoomedIn=!n,f.zoomTo(n?f.currItem.initialZoomLevel:t,e,333),p[(n?"remove":"add")+"Class"](m,"pswp--zoomed-in")}}});function pn(){hn&&clearTimeout(hn),yn&&clearTimeout(yn)}function fn(){var e=Cn(),t={};if(!(e.length<5)){var n,o=e.split("&");for(r=0;r<o.length;r++)!o[r]||(n=o[r].split("=")).length<2||(t[n[0]]=n[1]);if(h.galleryPIDs){for(var i=t.pid,r=t.pid=0;r<Vt.length;r++)if(Vt[r].pid===i){t.pid=r;break}}else t.pid=parseInt(t.pid,10)-1;t.pid<0&&(t.pid=0)}return t}var hn,gn,yn,vn,wn,bn,n,xn,En,Tn,P,An,Sn={history:!0,galleryUID:1},Cn=function(){return P.hash.substring(1)},In=function(){var e,t;yn&&clearTimeout(yn),at||s?yn=setTimeout(In,500):(vn?clearTimeout(gn):vn=!0,t=g+1,(e=en(g)).hasOwnProperty("pid")&&(t=e.pid),e=n+"&gid="+h.galleryUID+"&pid="+t,xn||-1===P.hash.indexOf(e)&&(Tn=!0),t=P.href.split("#")[0]+"#"+e,An?"#"+e!==window.location.hash&&history[xn?"replaceState":"pushState"]("",document.title,t):xn?P.replace(t):P.hash=e,xn=!0,gn=setTimeout(function(){vn=!1},60))};H("History",{publicMethods:{initHistory:function(){var e,t;p.extend(h,Sn,!0),h.history&&(P=window.location,xn=En=Tn=!1,n=Cn(),An="pushState"in history,-1<n.indexOf("gid=")&&(n=(n=n.split("&gid=")[0]).split("?gid=")[0]),r("afterChange",f.updateURL),r("unbindEvents",function(){p.unbind(window,"hashchange",f.onHashChange)}),e=function(){bn=!0,En||(Tn?history.back():n?P.hash=n:An?history.pushState("",document.title,P.pathname+P.search):P.hash=""),pn()},r("unbindEvents",function(){V&&e()}),r("destroy",function(){bn||e()}),r("firstUpdate",function(){g=fn().pid}),-1<(t=n.indexOf("pid="))&&"&"===(n=n.substring(0,t)).slice(-1)&&(n=n.slice(0,-1)),setTimeout(function(){X&&p.bind(window,"hashchange",f.onHashChange)},40))},onHashChange:function(){return Cn()===n?(En=!0,void f.close()):void(vn||(wn=!0,f.goTo(fn().pid),wn=!1))},updateURL:function(){pn(),wn||(xn?hn=setTimeout(In,800):In())}}}),p.extend(f,z)}}),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).reframe=t()})(this,function(){function t(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var o=Array(e),i=0,t=0;t<n;t++)for(var r=arguments[t],a=0,l=r.length;a<l;a++,i++)o[i]=r[a];return o}return function(e,i){return void 0===i&&(i="js-reframe"),("string"==typeof e?t(document.querySelectorAll(e)):"length"in e?t(e):[e]).forEach(function(e){var t,n,o;-1!==e.className.split(" ").indexOf(i)||-1<e.style.width.indexOf("%")||(t=e.getAttribute("height")||e.offsetHeight,n=e.getAttribute("width")||e.offsetWidth,t=("string"==typeof t?parseInt(t):t)/("string"==typeof n?parseInt(n):n)*100,(n=document.createElement("div")).className=i,(o=n.style).position="relative",o.width="100%",o.paddingTop=t+"%",(o=e.style).position="absolute",o.width="100%",o.height="100%",o.left="0",o.top="0",null!=(t=e.parentNode)&&t.insertBefore(n,e),null!=(o=e.parentNode)&&o.removeChild(e),n.appendChild(e))})}}),(()=>{var e=document.querySelector(".gh-burger");e&&e.addEventListener("click",function(){document.body.classList.contains("is-head-open")?document.body.classList.remove("is-head-open"):document.body.classList.add("is-head-open")})})(),lightbox(".kg-image-card > .kg-image[width][height], .kg-gallery-image > img"),reframe(document.querySelectorAll(['.gh-content iframe[src*="youtube.com"]','.gh-content iframe[src*="youtube-nocookie.com"]','.gh-content iframe[src*="player.vimeo.com"]','.gh-content iframe[src*="kickstarter.com"][src*="video.html"]',".gh-content object",".gh-content embed"].join(","))),dropdown(),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).DOMPurify=t()})(this,function(){function Ge(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i(s,t)}let{entries:Ye,setPrototypeOf:r,isFrozen:a,getPrototypeOf:o,getOwnPropertyDescriptor:u}=Object,{freeze:Ke,seal:e,create:Xe}=Object,{apply:l,construct:i}="undefined"!=typeof Reflect&&Reflect,$e=(Ke=Ke||function(e){return e},e=e||function(e){return e},l=l||function(e,t){for(var n=arguments.length,o=new Array(2<n?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];return e.apply(t,o)},i=i||function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return new e(...n)},c(Array.prototype.forEach)),bt=c(Array.prototype.lastIndexOf),Ve=c(Array.prototype.pop),Je=c(Array.prototype.push),xt=c(Array.prototype.splice),Qe=c(String.prototype.toLowerCase),et=c(String.prototype.toString),tt=c(String.prototype.match),nt=c(String.prototype.replace),Et=c(String.prototype.indexOf),Tt=c(String.prototype.trim),ot=c(Object.prototype.hasOwnProperty),it=c(RegExp.prototype.test);s=TypeError;var s;function c(i){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,n=new Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return l(i,e,n)}}function rt(e,n,t){var o=2<arguments.length&&void 0!==t?t:Qe;r&&r(e,null);let i=n.length;for(;i--;){let t=n[i];if("string"==typeof t){let e=o(t);e!==t&&(a(n)||(n[i]=e),t=e)}e[t]=!0}return e}function at(e){var t,n,o=Xe(null);for([t,n]of Ye(e))ot(e,t)&&(Array.isArray(n)?o[t]=(t=>{for(let e=0;e<t.length;e++)ot(t,e)||(t[e]=null);return t})(n):n&&"object"==typeof n&&n.constructor===Object?o[t]=at(n):o[t]=n);return o}function lt(e,t){for(;null!==e;){var n=u(e,t);if(n){if(n.get)return c(n.get);if("function"==typeof n.value)return c(n.value)}e=o(e)}return function(){return null}}let st=Ke(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ct=Ke(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ut=Ke(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),At=Ke(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),dt=Ke(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),St=Ke(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),mt=Ke(["#text"]),pt=Ke(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ft=Ke(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ht=Ke(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gt=Ke(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),t=e(/\{\{[\w\W]*|[\w\W]*\}\}/gm),n=e(/<%[\w\W]*|[\w\W]*%>/gm),d=e(/\$\{[\w\W]*/gm),m=e(/^data-[\-\w.\u00B7-\uFFFF]+$/),p=e(/^aria-[\-\w]+$/),yt=e(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),f=e(/^(?:\w+script|data):/i),h=e(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),vt=e(/^html$/i),g=e(/^[a-z][.\w]*(-[.\w]+)+$/i);var wt=Object.freeze({__proto__:null,ARIA_ATTR:p,ATTR_WHITESPACE:h,CUSTOM_ELEMENT:g,DATA_ATTR:m,DOCTYPE_NAME:vt,ERB_EXPR:n,IS_ALLOWED_URI:yt,IS_SCRIPT_OR_DATA:f,MUSTACHE_EXPR:t,TMPLIT_EXPR:d});let y=function P(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;let u=e=>P(e);if(u.version="3.3.0",u.removed=[],!e||!e.document||9!==e.document.nodeType||!e.Element)return u.isSupported=!1,u;let i=e.document,F=i,z=F.currentScript,{DocumentFragment:U,HTMLTemplateElement:H,Node:B,Element:q,NodeFilter:t,NamedNodeMap:Z=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:W,DOMParser:j,trustedTypes:d}=e,n=q.prototype,G=lt(n,"cloneNode"),Y=lt(n,"remove"),K=lt(n,"nextSibling"),X=lt(n,"childNodes"),r=lt(n,"parentNode");if("function"==typeof H){let e=i.createElement("template");e.content&&e.content.ownerDocument&&(i=e.content.ownerDocument)}function $(e){return e instanceof RegExp||e instanceof Function}function V(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!R||R!==e){if(e=at(e=e&&"object"==typeof e?e:{}),L=-1===Fe.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,O="application/xhtml+xml"===L?et:Qe,c=ot(e,"ALLOWED_TAGS")?rt({},e.ALLOWED_TAGS,O):ge,h=ot(e,"ALLOWED_ATTR")?rt({},e.ALLOWED_ATTR,O):ye,Me=ot(e,"ALLOWED_NAMESPACES")?rt({},e.ALLOWED_NAMESPACES,et):Ne,Le=ot(e,"ADD_URI_SAFE_ATTR")?rt(at(Oe),e.ADD_URI_SAFE_ATTR,O):Oe,ke=ot(e,"ADD_DATA_URI_TAGS")?rt(at(De),e.ADD_DATA_URI_TAGS,O):De,A=ot(e,"FORBID_CONTENTS")?rt({},e.FORBID_CONTENTS,O):_e,g=ot(e,"FORBID_TAGS")?rt({},e.FORBID_TAGS,O):at({}),ve=ot(e,"FORBID_ATTR")?rt({},e.FORBID_ATTR,O):at({}),o=!!ot(e,"USE_PROFILES")&&e.USE_PROFILES,we=!1!==e.ALLOW_ARIA_ATTR,be=!1!==e.ALLOW_DATA_ATTR,xe=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ee=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,y=e.SAFE_FOR_TEMPLATES||!1,v=!1!==e.SAFE_FOR_XML,w=e.WHOLE_DOCUMENT||!1,b=e.RETURN_DOM||!1,x=e.RETURN_DOM_FRAGMENT||!1,E=e.RETURN_TRUSTED_TYPE||!1,Ae=e.FORCE_BODY||!1,Se=!1!==e.SANITIZE_DOM,Ce=e.SANITIZE_NAMED_PROPS||!1,Ie=!1!==e.KEEP_CONTENT,T=e.IN_PLACE||!1,he=e.ALLOWED_URI_REGEXP||yt,_=e.NAMESPACE||I,k=e.MATHML_TEXT_INTEGRATION_POINTS||k,D=e.HTML_INTEGRATION_POINTS||D,a=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&$(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(a.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&$(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(a.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(a.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),y&&(be=!1),x&&(b=!0),o&&(c=rt({},mt),h=[],!0===o.html&&(rt(c,st),rt(h,pt)),!0===o.svg&&(rt(c,ct),rt(h,ft),rt(h,gt)),!0===o.svgFilters&&(rt(c,ut),rt(h,ft),rt(h,gt)),!0===o.mathMl)&&(rt(c,dt),rt(h,ht),rt(h,gt)),e.ADD_TAGS&&("function"==typeof e.ADD_TAGS?l.tagCheck=e.ADD_TAGS:rt(c=c===ge?at(c):c,e.ADD_TAGS,O)),e.ADD_ATTR&&("function"==typeof e.ADD_ATTR?l.attributeCheck=e.ADD_ATTR:rt(h=h===ye?at(h):h,e.ADD_ATTR,O)),e.ADD_URI_SAFE_ATTR&&rt(Le,e.ADD_URI_SAFE_ATTR,O),e.FORBID_CONTENTS&&rt(A=A===_e?at(A):A,e.FORBID_CONTENTS,O),Ie&&(c["#text"]=!0),w&&rt(c,["html","head","body"]),c.table&&(rt(c,["tbody"]),delete g.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Ge('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Ge('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');p=e.TRUSTED_TYPES_POLICY,s=p.createHTML("")}else null!==(p=void 0===p?((e,t)=>{if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;var o="data-tt-policy-suffix",t="dompurify"+((n=t&&t.hasAttribute(o)?t.getAttribute(o):n)?"#"+n:"");try{return e.createPolicy(t,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+t+" could not be created."),null}})(d,z):p)&&"string"==typeof s&&(s=p.createHTML(""));Ke&&Ke(e),R=e}}function m(e,t){try{Je(u.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){Je(u.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(b||x)try{M(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}function J(t){let e=null,n=null;if(Ae)t="<remove></remove>"+t;else{let e=tt(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===L&&_===I&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var o=p?p.createHTML(t):t;if(_===I)try{e=(new j).parseFromString(o,L)}catch(t){}if(!e||!e.documentElement){e=ne.createDocument(_,"template",null);try{e.documentElement.innerHTML=Re?s:o}catch(t){}}return o=e.body||e.documentElement,t&&n&&o.insertBefore(i.createTextNode(n),o.childNodes[0]||null),_===I?re.call(e,w?"html":"body")[0]:w?e.documentElement:o}function Q(e){return oe.call(e.ownerDocument||e,e,t.SHOW_ELEMENT|t.SHOW_COMMENT|t.SHOW_TEXT|t.SHOW_PROCESSING_INSTRUCTION|t.SHOW_CDATA_SECTION,null)}function ee(e){return e instanceof W&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof Z)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)}function te(e){return"function"==typeof B&&e instanceof B}let p,s="",{implementation:ne,createNodeIterator:oe,createDocumentFragment:ie,getElementsByTagName:re}=i,ae=F.importNode,f={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]},{MUSTACHE_EXPR:le,ERB_EXPR:se,TMPLIT_EXPR:ce,DATA_ATTR:ue,ARIA_ATTR:de,IS_SCRIPT_OR_DATA:me,ATTR_WHITESPACE:pe,CUSTOM_ELEMENT:fe}=(u.isSupported="function"==typeof Ye&&"function"==typeof r&&ne&&void 0!==ne.createHTMLDocument,wt),he=wt.IS_ALLOWED_URI,c=null,ge=rt({},[...st,...ct,...ut,...dt,...mt]),h=null,ye=rt({},[...pt,...ft,...ht,...gt]),a=Object.seal(Xe(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),g=null,ve=null,l=Object.seal(Xe(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}})),we=!0,be=!0,xe=!1,Ee=!0,y=!1,v=!0,w=!1,Te=!1,Ae=!1,b=!1,x=!1,E=!1,Se=!0,Ce=!1,Ie=!0,T=!1,o={},A=null,_e=rt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ke=null,De=rt({},["audio","video","img","source","image","track"]),Le=null,Oe=rt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),S="http://www.w3.org/1998/Math/MathML",C="http://www.w3.org/2000/svg",I="http://www.w3.org/1999/xhtml",_=I,Re,Me=null,Ne=rt({},[S,C,I],et),k=rt({},["mi","mo","mn","ms","mtext"]),D=rt({},["annotation-xml"]),Pe=rt({},["title","style","font","a","script"]),L=null,Fe=["application/xhtml+xml","text/html"],O=null,R=null,ze=i.createElement("form"),Ue=rt({},[...ct,...ut,...At]),He=rt({},[...dt,...St]),M=function(t){Je(u.removed,{element:t});try{r(t).removeChild(t)}catch(e){Y(t)}};function N(e,t,n){$e(e,e=>{e.call(u,t,n,R)})}function Be(o){let t=null;if(N(f.beforeSanitizeElements,o,null),!ee(o)){let e=O(o.nodeName);if(N(f.uponSanitizeElement,o,{tagName:e,allowedTags:c}),!(v&&o.hasChildNodes()&&!te(o.firstElementChild)&&it(/<[/\w!]/g,o.innerHTML)&&it(/<[/\w!]/g,o.textContent)||7===o.nodeType||v&&8===o.nodeType&&it(/<[/\w]/g,o.data))){if(l.tagCheck instanceof Function&&l.tagCheck(e)||c[e]&&!g[e])return(!(o instanceof q)||(e=>{let t=r(e);t&&t.tagName||(t={namespaceURI:_,tagName:"template"});var n=Qe(e.tagName),o=Qe(t.tagName);return Me[e.namespaceURI]&&(e.namespaceURI===C?t.namespaceURI===I?"svg"===n:t.namespaceURI===S?"svg"===n&&("annotation-xml"===o||k[o]):Boolean(Ue[n]):e.namespaceURI===S?t.namespaceURI===I?"math"===n:t.namespaceURI===C?"math"===n&&D[o]:Boolean(He[n]):e.namespaceURI===I?(t.namespaceURI!==C||D[o])&&(t.namespaceURI!==S||k[o])&&!He[n]&&(Pe[n]||!Ue[n]):"application/xhtml+xml"===L&&Me[e.namespaceURI])})(o))&&("noscript"!==e&&"noembed"!==e&&"noframes"!==e||!it(/<\/no(script|embed|frames)/i,o.innerHTML))?(y&&3===o.nodeType&&(t=o.textContent,$e([le,se,ce],e=>{t=nt(t,e," ")}),o.textContent!==t)&&(Je(u.removed,{element:o.cloneNode()}),o.textContent=t),N(f.afterSanitizeElements,o,null)):M(o);if(!g[e]&&je(e)){if(a.tagNameCheck instanceof RegExp&&it(a.tagNameCheck,e))return;if(a.tagNameCheck instanceof Function&&a.tagNameCheck(e))return}if(Ie&&!A[e]){let t=r(o)||o.parentNode,n=X(o)||o.childNodes;if(n&&t)for(let e=n.length-1;0<=e;--e){var i=G(n[e],!0);i.__removalCount=(o.__removalCount||0)+1,t.insertBefore(i,K(o))}}}}M(o)}function qe(e,t,n){if(Se&&("id"===t||"name"===t)&&(n in i||n in ze))return!1;if((!be||ve[t]||!it(ue,t))&&!(we&&it(de,t)||l.attributeCheck instanceof Function&&l.attributeCheck(t,e)))if(!h[t]||ve[t]){if(!(je(e)&&(a.tagNameCheck instanceof RegExp&&it(a.tagNameCheck,e)||a.tagNameCheck instanceof Function&&a.tagNameCheck(e))&&(a.attributeNameCheck instanceof RegExp&&it(a.attributeNameCheck,t)||a.attributeNameCheck instanceof Function&&a.attributeNameCheck(t,e))||"is"===t&&a.allowCustomizedBuiltInElements&&(a.tagNameCheck instanceof RegExp&&it(a.tagNameCheck,n)||a.tagNameCheck instanceof Function&&a.tagNameCheck(n))))return!1}else if(!Le[t]&&!it(he,nt(n,pe,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Et(n,"data:")||!ke[e])&&(!xe||it(me,nt(n,pe,"")))&&n)return!1;return!0}function Ze(n){N(f.beforeSanitizeAttributes,n,null);var o=n.attributes;if(o&&!ee(n)){var i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:h,forceKeepAttr:void 0};let e=o.length;for(;e--;){var{name:r,namespaceURI:a,value:l}=o[e],s=O(r);let t="value"===r?l:Tt(l);if(i.attrName=s,i.attrValue=t,i.keepAttr=!0,i.forceKeepAttr=void 0,N(f.uponSanitizeAttribute,n,i),t=i.attrValue,!Ce||"id"!==s&&"name"!==s||(m(r,n),t="user-content-"+t),v&&it(/((--!?|])>)|<\/(style|title|textarea)/i,t))m(r,n);else if("attributename"===s&&tt(t,"href"))m(r,n);else if(!i.forceKeepAttr)if(i.keepAttr)if(!Ee&&it(/\/>/i,t))m(r,n);else{y&&$e([le,se,ce],e=>{t=nt(t,e," ")});var c=O(n.nodeName);if(qe(c,s,t)){if(p&&"object"==typeof d&&"function"==typeof d.getAttributeType&&!a)switch(d.getAttributeType(c,s)){case"TrustedHTML":t=p.createHTML(t);break;case"TrustedScriptURL":t=p.createScriptURL(t)}if(t!==l)try{a?n.setAttributeNS(a,r,t):n.setAttribute(r,t),ee(n)?M(n):Ve(u.removed)}catch(o){m(r,n)}}else m(r,n)}else m(r,n)}N(f.afterSanitizeAttributes,n,null)}}function We(e){var t,n=Q(e);for(N(f.beforeSanitizeShadowDOM,e,null);t=n.nextNode();)N(f.uponSanitizeShadowNode,t,null),Be(t),Ze(t),t.content instanceof U&&We(t.content);N(f.afterSanitizeShadowDOM,e,null)}let je=function(e){return"annotation-xml"!==e&&tt(e,fe)};return u.sanitize=function(t){let e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=null,o,i,r=null;if("string"!=typeof(t=(Re=!t)?"\x3c!--\x3e":t)&&!te(t)){if("function"!=typeof t.toString)throw Ge("toString is not a function");if("string"!=typeof(t=t.toString()))throw Ge("dirty is not a string, aborting")}if(!u.isSupported)return t;if(Te||V(e),u.removed=[],T="string"==typeof t?!1:T){if(t.nodeName){let e=O(t.nodeName);if(!c[e]||g[e])throw Ge("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof B)1===(o=(n=J("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?n=o:n.appendChild(o);else{if(!b&&!y&&!w&&-1===t.indexOf("<"))return p&&E?p.createHTML(t):t;if(!(n=J(t)))return b?null:E?s:""}n&&Ae&&M(n.firstChild);for(var a=Q(T?t:n);i=a.nextNode();)Be(i),Ze(i),i.content instanceof U&&We(i.content);if(T)return t;if(b){if(x)for(r=ie.call(n.ownerDocument);n.firstChild;)r.appendChild(n.firstChild);else r=n;return r=h.shadowroot||h.shadowrootmode?ae.call(F,r,!0):r}let l=w?n.outerHTML:n.innerHTML;return w&&c["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&it(vt,n.ownerDocument.doctype.name)&&(l="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+l),y&&$e([le,se,ce],e=>{l=nt(l,e," ")}),p&&E?p.createHTML(l):l},u.setConfig=function(){V(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),Te=!0},u.clearConfig=function(){R=null,Te=!1},u.isValidAttribute=function(e,t,n){R||V({});e=O(e),t=O(t);return qe(e,t,n)},u.addHook=function(e,t){"function"==typeof t&&Je(f[e],t)},u.removeHook=function(e,t){return void 0!==t?-1===(t=bt(f[e],t))?void 0:xt(f[e],t,1)[0]:Ve(f[e])},u.removeHooks=function(e){f[e]=[]},u.removeAllHooks=function(){f={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},u}();return y}),(()=>{var e,t;let n="true"===new URLSearchParams(window.location.search).get("ppa_debug")||"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,c=(...e)=>n&&console.log(...e),u=(...e)=>n&&console.error(...e),d="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:4000/api":"https://ppa.fly.dev/api";function m(e,t){c(" PPA: Replacing Ghost paywall with buy option"),e.innerHTML=`
      <div class="gh-post-upgrade-cta-content">
        <h2>This post is for paid subscribers only</h2>
        <p>Buy this article for $5 or upgrade to a paid subscription for unlimited access.</p>
        <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem; flex-wrap: wrap;">
          <a href="#" 
             class="gh-btn gh-btn-primary ppa-buy-btn"
             data-post-id="${t.dataset.postId}"
             data-post-title="${t.dataset.postTitle}"
             data-post-url="${t.dataset.postUrl}"
             data-member-email="${t.dataset.memberEmail}"
             ${t.dataset.memberName?`data-member-name="${t.dataset.memberName}"`:""}>
            Buy this article for $5
          </a>
          <a href="#/portal/signup" 
             class="gh-btn"
             data-portal="signup">
            Upgrade to subscription
          </a>
        </div>
      </div>
    `;t=e.querySelector(".ppa-buy-btn");t&&t.addEventListener("click",o)}async function o(t){t.preventDefault();t=t.currentTarget;c(" PPA: Buy button clicked"),t.disabled=!0,t.textContent="Loading...";try{var e=await fetch(d+"/create-tip-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:t.dataset.postId,postTitle:t.dataset.postTitle,postUrl:t.dataset.postUrl,memberEmail:t.dataset.memberEmail,memberName:t.dataset.memberName||""})}),n=await e.json();if(c(" PPA: API response:",e.status,n),!e.ok)throw new Error(n.error||n.message||"API request failed");if(!n.checkoutUrl)throw new Error("No checkout URL received");c(" PPA: Redirecting to Stripe checkout"),window.location.href=n.checkoutUrl}catch(e){u(" PPA: Checkout creation failed:",e),alert("Failed to create checkout. Please try again."),t.disabled=!1,t.textContent="Buy this article for $5"}}c(" PPA: Initialized"),window.location.search.includes("purchase=success")?(c(" PPA: Purchase successful, reloading to check access"),history.replaceState({},"",window.location.pathname),window.location.reload()):(t=document.querySelector(".gh-post-upgrade-cta"))?(e=document.querySelector("article[data-post-id]"))?e.dataset.memberEmail?(c(" PPA: Free member detected - checking purchase status"),(async(t,n)=>{var e=n.dataset.postId,o=n.dataset.memberEmail;try{c(" PPA: Step 1 - Verifying access");var i,r,a,l,s=await(await fetch(d+"/verify-access",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:e,memberEmail:o})})).json();s.hasAccess?s.accessToken?(c(" PPA: Access verified, token received"),c(" PPA: Step 2 - Fetching content with token"),(i=await fetch(d+`/get-content/${e}?token=`+s.accessToken)).ok?(a=await i.json()).html?(c(" PPA: Access granted - removing paywall and showing content"),t.remove(),(l=document.querySelector(".gh-content"))&&(l.innerHTML=a.html,c(" PPA: Full content injected"))):(u(" PPA: No content in response"),m(t,n)):(r=await i.json(),u(" PPA: Content fetch failed:",r),403===i.status?"expired"===r.reason?(u(" PPA: Token expired, please refresh"),alert("Session expired. Please refresh the page.")):"invalid_signature"===r.reason&&u(" PPA: Invalid token signature"):429===i.status&&(u(" PPA: Rate limit exceeded"),alert("Too many requests. Please wait a moment and refresh.")),m(t,n))):(u(" PPA: Access granted but no token received"),m(t,n)):(c(" PPA: No access - showing buy option"),m(t,n))}catch(e){u(" PPA: Access check failed:",e),m(t,n)}})(t,e)):(c(" PPA: Anonymous user - customizing paywall"),(t=(e=t).querySelector("h2, h3, h4"))&&(t.textContent="This post is for subscribers only"),(t=e.querySelector("p"))&&(t.textContent="Sign up for a free account to buy individual articles or subscribe for unlimited access."),(t=e.querySelector('a[data-portal="signup"]'))&&!t.textContent.toLowerCase().includes("free")&&(t.textContent="Sign up free"),c(" PPA: Anonymous paywall customized")):c(" PPA: No article metadata found"):c(" PPA: No paywall found (public post or paid member)")})(),pagination(!0),(()=>{if(document.body.classList.contains("post-template")){let t=document.querySelector(".gh-cover");if(t){let e=t.querySelector(".gh-cover-image");window.addEventListener("load",function(){t.style.setProperty("--cover-height",e.clientWidth*e.naturalHeight/e.naturalWidth+"px"),t.classList.remove("loading")})}}})();